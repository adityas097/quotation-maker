import{u as N,j as e,A as h}from"./index-Dp9SiYe_.js";import{b as d,c as k,u as S,L as f}from"./vendor-hBbQJCfh.js";import{g as L,G as E,i as P,s as A}from"./firebase-sG74Ed2G.js";import{M as G}from"./mail-CGpRQY-A.js";import{L as I}from"./lock-BHcbPH30.js";import{A as C}from"./arrow-right-DM-HL-hc.js";const z={apiKey:"AIzaSyBznMrIjP8WPNu64Q2Nm4cMVFQHRWocPHU",authDomain:"eliza-infotech-billbook.firebaseapp.com",projectId:"eliza-infotech-billbook",storageBucket:"eliza-infotech-billbook.firebasestorage.app",messagingSenderId:"547539923912",appId:"1:547539923912:web:962b2ce678cd7996b446fd",measurementId:"G-9G15ZNKXBS"},O=P(z),R=L(O),T=new E,D=()=>{const[n,b]=d.useState({username:"",password:""}),[m,t]=d.useState(""),[a,i]=d.useState(!1),u=k(),w=S(),{login:g}=N(),x=w.state?.from?.pathname||"/",p=s=>{b({...n,[s.target.name]:s.target.value})},j=async()=>{t(""),i(!0);try{const r=await(await A(R,T)).user.getIdToken(),o=await fetch(`${h}/api/auth/google-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:r})}),c=await o.text();console.log("[GoogleLogin] Response:",c);let l;try{l=JSON.parse(c)}catch(v){console.error("JSON Parse Error:",v),t(`Server Error: Response was not valid JSON. Raw: ${c.substring(0,50)}...`),i(!1);return}o.ok?(g(l.user,l.token),u(x,{replace:!0})):t(l.error||"Google Login failed")}catch(s){console.error(s),t(`Google Sign-In failed: ${s.message}`)}finally{i(!1)}},y=async s=>{s.preventDefault(),t(""),i(!0);try{const r=await fetch(`${h}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await r.json();r.ok?(g(o.user,o.token),u(x,{replace:!0})):t(o.error||"Login failed")}catch(r){console.error(r),t("Something went wrong. Please try again.")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-2xl shadow-2xl w-full max-w-4xl flex overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-1/2 p-8 md:p-12 bg-white",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Enter your details to access your account"})]}),m&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-6 text-sm flex items-center",children:[e.jsx("span",{className:"mr-2",children:"⚠️"})," ",m]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username / Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(G,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"username",value:n.username,onChange:p,className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter username",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"password",value:n.password,onChange:p,className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter password",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:a,className:`w-full py-3 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg transform transition-all hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Logging in...":"Sign In"}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-400 font-medium",children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:j,disabled:a,className:`w-full py-3 px-4 border border-gray-200 rounded-xl shadow-sm bg-white hover:bg-gray-50 text-gray-700 font-medium flex items-center justify-center transition-colors ${a?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"h-5 w-5 mr-2"}),"Sign in with Google"]})]}),e.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(f,{to:"/signup",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Create Account"})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col justify-center items-center w-1/2 bg-indigo-600 p-12 text-white text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 to-indigo-800 opacity-90"}),e.jsxs("div",{className:"relative z-10 max-w-sm",children:[e.jsx("h2",{className:"text-4xl font-extrabold mb-6",children:"QuoteMaker"}),e.jsx("p",{className:"text-indigo-100 text-lg leading-relaxed mb-8",children:"Empower your business with professional quotations and invoices. Simple, fast, and secure."}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(f,{to:"/signup",className:"flex items-center text-white bg-white/20 hover:bg-white/30 px-6 py-2 rounded-full backdrop-blur-sm transition-all",children:["Get Started ",e.jsx(C,{size:16,className:"ml-2"})]})})]}),e.jsx("div",{className:"absolute top-10 right-10 w-40 h-40 bg-pink-400/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-10 left-10 w-40 h-40 bg-blue-400/20 rounded-full blur-3xl"})]})]})})};export{D as default};
