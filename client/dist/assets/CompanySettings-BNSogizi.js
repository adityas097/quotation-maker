import{c,A as d,j as e}from"./index-C5bGCW4r.js";import{b as l}from"./vendor-hBbQJCfh.js";import{a as u}from"./authFetch-CQWmCeCA.js";import{P as z}from"./plus-BroQ0DqQ.js";import{M as T}from"./map-pin-BVtU232o.js";import{M as w}from"./mail-DleWB6Vi.js";import{T as B}from"./trash-2-BCfEatWq.js";const M=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],I=c("building",M);const A=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],W=c("circle-check-big",A);const E=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],P=c("pen",E);const D=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],$=c("smartphone",D);function q(){const[f,p]=l.useState([]),[y,o]=l.useState(!1),[r,x]=l.useState(null),[h,g]=l.useState(!1),[s,n]=l.useState({name:"",address:"",phone:"",email:"",gstin:"",pan:"",bank_name:"",account_no:"",ifsc:"",account_holder_name:"",upi_id:"",is_default:!1});l.useEffect(()=>{m()},[]);const m=async()=>{try{const t=await u(`${d}/api/companies`);if(!t.ok){console.error("Failed to fetch companies:",t.statusText);return}const a=await t.json();Array.isArray(a)?p(a):(console.error("API returned non-array:",a),p([]))}catch(t){console.error("Error fetching companies:",t),p([])}},j=async t=>{t.preventDefault(),g(!0);const a=r?`${d}/api/companies/${r.id}`:`${d}/api/companies`,S=r?"PUT":"POST";try{const i=await u(a,{method:S,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(i.ok)o(!1),x(null),n({name:"",address:"",phone:"",email:"",gstin:"",pan:"",bank_name:"",account_no:"",ifsc:"",account_holder_name:"",upi_id:"",is_default:!1}),m();else{const N=await i.json();alert("Success: "+i.ok+" but something went wrong: "+(N.error||i.statusText))}}catch(i){console.error("Error saving company:",i),alert("Error saving company: "+i.message)}finally{g(!1)}},b=t=>{x(t),n({...t,is_default:!!t.is_default}),o(!0)},v=async t=>{if(window.confirm("Are you sure you want to delete this company?"))try{await u(`${d}/api/companies/${t}`,{method:"DELETE"}),m()}catch(a){console.error("Error deleting company:",a)}},k=()=>{x(null),n({name:"",address:"",phone:"",email:"",gstin:"",pan:"",bank_name:"",account_no:"",ifsc:"",account_holder_name:"",upi_id:"",is_default:!1}),o(!0)},_={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},C={backgroundColor:"white",padding:"2rem",borderRadius:"var(--radius-lg)",width:"100%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto"};return e.jsxs("div",{style:{paddingBottom:"40px"},children:[e.jsxs("div",{className:"flex-between mb-6",children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700},children:"Company Settings"}),e.jsxs("button",{onClick:k,className:"btn btn-primary",children:[e.jsx(z,{size:18})," Add New Company"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:f.map(t=>e.jsxs("div",{className:"card",style:{position:"relative",border:t.is_default?"2px solid var(--accent)":"1px solid var(--border)"},children:[t.is_default&&e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"#eff6ff",color:"var(--accent)",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(W,{size:12})," Default"]}),e.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"10px",paddingRight:"30px"},children:t.name}),e.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"0.9rem",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[e.jsx(T,{size:16,style:{marginTop:"2px",flexShrink:0}}),e.jsx("span",{children:t.address})]}),e.jsx("div",{style:{display:"flex",gap:"15px"},children:e.jsxs("span",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[e.jsx($,{size:16})," ",t.phone]})}),e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[e.jsx(w,{size:16})," ",t.email]}),e.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"GSTIN:"})," ",t.gstin]}),e.jsxs("div",{children:[e.jsx("strong",{children:"PAN:"})," ",t.pan]})]})}),e.jsxs("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid var(--border)"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"5px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(I,{size:16})," Bank Details"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"x 10px",rowGap:"4px",fontSize:"0.85rem"},children:[e.jsx("span",{style:{color:"#666"},children:"Bank:"})," ",e.jsx("span",{children:t.bank_name}),e.jsx("span",{style:{color:"#666"},children:"A/c No:"})," ",e.jsx("span",{children:t.account_no}),e.jsx("span",{style:{color:"#666"},children:"IFSC:"})," ",e.jsx("span",{children:t.ifsc}),e.jsx("span",{style:{color:"#666"},children:"Holder:"})," ",e.jsx("span",{children:t.account_holder_name}),t.upi_id&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#666"},children:"UPI:"})," ",e.jsx("span",{children:t.upi_id})]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",paddingTop:"15px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("button",{onClick:()=>b(t),className:"btn btn-secondary",style:{flex:1},children:[e.jsx(P,{size:16})," Edit"]}),e.jsxs("button",{onClick:()=>v(t.id),className:"btn btn-danger",style:{flex:1,background:"#fee2e2",color:"#ef4444",borderColor:"#fee2e2"},children:[e.jsx(B,{size:16})," Delete"]})]})]},t.id))}),y&&e.jsx("div",{style:_,children:e.jsxs("div",{style:C,children:[e.jsxs("div",{className:"flex-between mb-6",children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600},children:r?"Edit Company":"Add New Company"}),e.jsx("button",{onClick:()=>o(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#999"},children:"Ã—"})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"Company Name"}),e.jsx("input",{className:"input",required:!0,value:s.name,onChange:t=>n({...s,name:t.target.value})})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"Address"}),e.jsx("textarea",{className:"input",rows:"2",value:s.address,onChange:t=>n({...s,address:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"Phone"}),e.jsx("input",{className:"input",value:s.phone,onChange:t=>n({...s,phone:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"Email"}),e.jsx("input",{className:"input",type:"email",value:s.email,onChange:t=>n({...s,email:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"GSTIN"}),e.jsx("input",{className:"input",value:s.gstin,onChange:t=>n({...s,gstin:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"PAN"}),e.jsx("input",{className:"input",value:s.pan,onChange:t=>n({...s,pan:t.target.value})})]}),e.jsx("div",{style:{gridColumn:"1 / -1",borderTop:"1px solid #eee",paddingTop:"15px",marginTop:"10px"},children:e.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"15px"},children:"Bank Details"})}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"Bank Name"}),e.jsx("input",{className:"input",value:s.bank_name,onChange:t=>n({...s,bank_name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"Account Holder Name"}),e.jsx("input",{className:"input",value:s.account_holder_name,onChange:t=>n({...s,account_holder_name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"Account Number"}),e.jsx("input",{className:"input",value:s.account_no,onChange:t=>n({...s,account_no:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"IFSC Code"}),e.jsx("input",{className:"input",value:s.ifsc,onChange:t=>n({...s,ifsc:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:500,fontSize:"0.9rem"},children:"UPI ID"}),e.jsx("input",{className:"input",value:s.upi_id,onChange:t=>n({...s,upi_id:t.target.value})})]}),e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[e.jsx("input",{type:"checkbox",id:"is_default",style:{width:"18px",height:"18px",cursor:"pointer"},checked:s.is_default,onChange:t=>n({...s,is_default:t.target.checked})}),e.jsx("label",{htmlFor:"is_default",style:{fontSize:"0.95rem",fontWeight:500,cursor:"pointer",color:"var(--text-main)"},children:"Set as Default Company for new Quotes"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"15px",marginTop:"30px",borderTop:"1px solid #eee",paddingTop:"20px"},children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"btn btn-secondary",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Saving...":r?"Update Company":"Save Company"})]})]})]})})]})}export{q as default};
